"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[707],{44098:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b,mapToShippingProps:()=>h});var n=a(31635),r=a(30455),i=a(60833),o=a(46487),l=a(49655),d=a(24001),c=a(54454),s=a(45293),u=a(11889),m=a(84559),f=a(28407),p=function(e){function t(t){var a=e.call(this,t)||this;return a.handlesubmit=function(e){return(0,n.__awaiter)(a,void 0,void 0,(function(){var t,a,r,i,o,l,d,c,s,u,m,f,p,h,b;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),t=this.props,a=t.po_number,r=t.budgeting,i=t.program_id,o=t.bottler,l=t.infoUpdated,d=t.cart,c=t.handleCustomerInfoUpdate,""==a||""==r.label||""==i.label||""==o.label?[3,17]:(this.setState({isLoading:!0}),document.getElementById("dealerScript")?(s=document.getElementById("dealerScript"),u=s.attributes.store_api.nodeValue,m=(null==d?void 0:d.id)||"",u&&""!=m?(f=void 0,p=void 0,h=void 0,b=void 0,0==(null==l?void 0:l.budgeting.valid)&&r?[4,this.createMetaFieldsGraphQL(m,"budgeting",r,u)]:[3,2]):[3,17]):[3,17]);case 1:return f=n.sent(),[3,4];case 2:return[4,this.updateMetaFieldsGraphQL(m,null==l?void 0:l.budgeting.entityID,"budgeting",r,u)];case 3:f=n.sent(),n.label=4;case 4:return 0==(null==l?void 0:l.program_id.valid)&&i?[4,this.createMetaFieldsGraphQL(m,"program_id",i,u)]:[3,6];case 5:return p=n.sent(),[3,8];case 6:return[4,this.updateMetaFieldsGraphQL(m,null==l?void 0:l.program_id.entityID,"program_id",i,u)];case 7:p=n.sent(),n.label=8;case 8:return 0==(null==l?void 0:l.bottler.valid)&&o?[4,this.createMetaFieldsGraphQL(m,"bottler",o,u)]:[3,10];case 9:return h=n.sent(),[3,12];case 10:return[4,this.updateMetaFieldsGraphQL(m,null==l?void 0:l.bottler.entityID,"bottler",o,u)];case 11:h=n.sent(),n.label=12;case 12:return 0==(null==l?void 0:l.po_number.valid)&&a?[4,this.createMetaFieldsGraphQL(m,"po_number",a,u)]:[3,14];case 13:return b=n.sent(),[3,16];case 14:return[4,this.updateMetaFieldsGraphQL(m,null==l?void 0:l.po_number.entityID,"po_number",a,u)];case 15:b=n.sent(),n.label=16;case 16:0!=f&&0!=p&&0!=h&&0!=b?(this.setState({customerInfoError:!1}),c(m,u)):(this.setState({customerInfoError:!0}),this.setState({isLoading:!1})),n.label=17;case 17:return[2]}}))}))},a.createMetaFieldsGraphQL=function(e,t,r,i){return(0,n.__awaiter)(a,void 0,void 0,(function(){var a,o;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return a="po_number"==t?r:r.label,o='\n            mutation createCartMetafield {\n                cart {\n                    createCartMetafield(\n                    input: {cartEntityId: "'.concat(e,'", data: {key: "').concat(t,'", value: "').concat(a,'"}}\n                    ) {\n                        metafield {\n                            id\n                            entityId\n                            key\n                            value\n                        }\n                        errors {\n                            ... on Error {\n                            message\n                            }\n                        }\n                    }\n                }\n            }\n        '),[4,fetch("/graphql",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({query:o})}).then((function(e){return e.json()})).then((function(e){return e&&e.data&&e.data.cart&&e.data.cart.createCartMetafield.metafield&&e.data.cart.createCartMetafield.metafield.entityId?e.data.cart.createCartMetafield.metafield.entityId:0}))];case 1:return n.sent(),[2]}}))}))},a.updateMetaFieldsGraphQL=function(e,t,r,i,o){return(0,n.__awaiter)(a,void 0,void 0,(function(){var a,l;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return a="po_number"==r?i:i.label,l='\n            mutation updateCartMetafield {\n                cart {\n                    updateCartMetafield(\n                    input: {cartEntityId: "'.concat(e,'", data: {key: "').concat(r,'", value: "').concat(a,'"}, metafieldEntityId: ').concat(t,"}\n                    ) {\n                        metafield {\n                            id\n                            entityId\n                            key\n                            value\n                        }\n                        errors {\n                            ... on Error {\n                            message\n                            }\n                        }\n                    }\n                }\n            }\n        "),[4,fetch("/graphql",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({query:l})}).then((function(e){return e.json()})).then((function(e){return e&&e.data&&e.data.cart&&e.data.cart.updateCartMetafield.metafield&&e.data.cart.updateCartMetafield.metafield.entityId?e.data.cart.updateCartMetafield.metafield.entityId:0}))];case 1:return n.sent(),[2]}}))}))},a.state={customerGrpId:0,isLoading:!1,customerInfoError:!1},a}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.customer;e&&e.customerGroup&&e.customerGroup.id&&this.setState({customerGrpId:e.customerGroup.id})},t.prototype.render=function(){var e=this.props,t=e.infoData,a=e.handleInfoChange,n=e.po_number,s=e.budgeting,m=e.program_id,p=e.bottler,h=e.isFloatingLabelEnabled,b=this.state,g=b.customerGrpId,y=b.isLoading,v=b.customerInfoError;return r.createElement("form",{className:"checkout-form",id:"checkout-customerInfo-returning",onSubmit:this.handlesubmit},r.createElement(i.A,null,r.createElement("div",{className:"customerInfo-form"},v&&r.createElement(u.A,{type:u.v.Error},r.createElement(l.A,{id:"customerInfo.error_message"})),t.map((function(e,t){return r.createElement(r.Fragment,null,e&&"dropdown"==e.type?r.createElement(r.Fragment,null,e.group_ids.map((function(n,i){return r.createElement(r.Fragment,null,n==g&&r.createElement("div",{key:t,className:"dynamic-form-field ".concat(h&&"floating-form-field")},r.createElement("div",{className:"form-field",key:i},r.createElement(f.A,{htmlFor:e.metafieldKey},e.label),r.createElement(d.Ay,{id:e.metafieldKey,"aria-label":e.label,name:e.label,options:e.options,value:"budgeting"==e.metafieldKey?s:"program_id"==e.metafieldKey?m:p,onChange:function(t){return a(e.metafieldKey,t)}}))))}))):r.createElement("div",{key:t,className:"dynamic-form-field ".concat(h&&"floating-form-field")},r.createElement("div",{className:"form-field",key:t+"1"},r.createElement(c.A,{id:e.metafieldKey,name:e.label,onChange:function(t){return a(e.metafieldKey,t.target.value)},placeholder:e.label,testId:"".concat(e.metafieldKey,"-").concat("text"),type:"text",value:n,additionalClassName:s&&"100% BODYARMOR"==s.value?"input_disabled":"",isFloatingLabelEnabled:h}),r.createElement(f.A,{htmlFor:e.metafieldKey,isFloatingLabelEnabled:h},e.label))))})))),r.createElement("div",{className:"form-actions"},r.createElement(o.Ay,{disabled:""==n||""==s.label||""==m.label||""==p.label,id:"checkout-customerInfo-create",isLoading:y,testId:"customer-customerInfo-create",type:"submit",variant:o.Ak.Primary},r.createElement(l.A,{id:"customerInfo.continue"}))))},t}(r.Component);function h(e){var t=e.checkoutState.data,a=t.getCustomer,n=t.getCart,r=t.getConfig,i=a(),o=n(),l=r();return i&&l&&o?{customer:i,cart:o,isFloatingLabelEnabled:(0,m.A)(l.checkoutSettings)}:null}const b=(0,s.A)(h)(p)}}]);
//# sourceMappingURL=customerinfo-6f3da06e.js.map